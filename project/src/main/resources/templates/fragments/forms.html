<!doctype html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<body>

    <!-- Search Form Fragment -->
    <form th:fragment="searchForm(searchValue, tags, selectedTag)" class="card card-body mb-3" method="get"
        th:action="@{/dashboard}">
        <div class="row g-2 align-items-end">
            <div class="col-md-6">
                <label class="form-label">Search (name / email)</label>
                <input class="form-control" type="text" name="search" placeholder="Ví dụ: nguyen, a@company.com"
                    th:value="${searchValue}">
            </div>

            <div class="col-md-4">
                <label class="form-label">Tag filter</label>
                <select class="form-select" name="tag">
                    <option value="" th:selected="${selectedTag == ''}">-- All --</option>
                    <option th:each="t : ${tags}" th:value="${t}" th:text="${t}" th:selected="${t == selectedTag}">
                    </option>
                </select>
            </div>

            <div class="col-md-2 d-grid">
                <button class="btn btn-primary" type="submit">Apply</button>
                <a class="btn btn-link" th:href="@{/dashboard}">Reset</a>
            </div>
        </div>
    </form>

    <!-- Interaction Form Fragment -->
    <form th:fragment="interactionForm(newInteraction, userId)"
        th:action="@{/customers/{id}/interactions(id=${userId})}" method="post" th:object="${newInteraction}">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

        <div class="mb-3">
            <label class="form-label">Type</label>
            <select class="form-select" th:field="*{type}">
                <option value="call">call</option>
                <option value="email">email</option>
                <option value="chat">chat</option>
            </select>
            <div class="text-danger small" th:if="${#fields.hasErrors('type')}" th:errors="*{type}"></div>
        </div>

        <div class="mb-3">
            <label class="form-label">Note</label>
            <textarea class="form-control" rows="4" th:field="*{note}"
                placeholder="Ghi chú nội dung tương tác..."></textarea>
            <div class="text-danger small" th:if="${#fields.hasErrors('note')}" th:errors="*{note}"></div>
        </div>

        <button class="btn btn-primary" type="submit">Save</button>
    </form>

    <!-- Login Form Fragment -->
    <form th:fragment="loginForm()" th:action="@{/login}" method="post" class="card card-body shadow-sm">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

        <div class="mb-3">
            <label class="form-label">Username</label>
            <input class="form-control" type="text" name="username" autofocus>
        </div>

        <div class="mb-3">
            <label class="form-label">Password</label>
            <input class="form-control" type="password" name="password">
        </div>

        <button class="btn btn-primary w-100" type="submit">Đăng nhập</button>
    </form>

</body>

</html>